# AI Employee - Autonomous Digital FTE

> **Tier Declaration: Gold** | Personal AI Employee Hackathon 2026

An autonomous AI-powered Full-Time Employee (FTE) that manages your business operations using **Claude Code** as its primary reasoning engine. It handles email triage, social media management across 4 platforms, Odoo accounting, task processing, and executive reporting — all with human-in-the-loop safety controls through an Obsidian vault-based state machine.

---

## Table of Contents

- [Architecture Overview](#architecture-overview)
- [Tier Breakdown](#tier-breakdown)
  - [Bronze Tier: Foundation](#bronze-tier-foundation)
  - [Silver Tier: Functional Assistant](#silver-tier-functional-assistant)
  - [Gold Tier: Autonomous Employee](#gold-tier-autonomous-employee)
  - [Platinum Tier: (Planned)](#platinum-tier-planned)
- [Quick Start](#quick-start)
- [Project Structure](#project-structure)
- [Setup Guides](#setup-guides)
- [Security Disclosure](#security-disclosure)
- [Demo Highlights](#demo-highlights)

---

## Architecture Overview

```
┌─────────────────────────────────────────────────────────────────┐
│                         LOCAL MACHINE                            │
│                                                                  │
│  main.py ──▶ scheduler.py ──▶ orchestrator.py ──▶ Claude CLI    │
│                    │                                    │        │
│     ┌──────────────┴──────────────┐          ┌──────────┴─────┐ │
│     │         Watchers            │          │  MCP Servers    │ │
│     │  • filesystem_watcher.py    │          │  • email-server │ │
│     │  • gmail_watcher.py         │          │  • odoo-server  │ │
│     └─────────────────────────────┘          │  • social-server│ │
│                                              └────────────────┘ │
│     Skills: linkedin, meta, twitter, weekly_audit, task_state   │
│     Utils:  retry (backoff), frontmatter, audit logging         │
│                                                                  │
│  AI_Employee_Vault/ (Obsidian)                                   │
│  ├── Inbox/ → Needs_Action/ → In_Progress/ → Done/              │
│  ├── Pending_Approval/ → Approved/ or Rejected/                  │
│  ├── Logs/, Briefings/, Plans/                                   │
│  └── Dashboard.md, Company_Handbook.md, Business_Goals.md        │
└──────────────────────────┬───────────────────────────────────────┘
                           │ HTTPS / XML-RPC / REST
              ┌────────────┼──────────────────┐
              ▼            ▼                  ▼
       ┌────────────┐ ┌──────────┐  ┌─────────────────┐
       │ Azure ACI  │ │ Neon DB  │  │   Cloud APIs     │
       │ (Odoo 17)  │─▶│(Postgres)│  │ • Gmail API      │
       │  :8069     │ └──────────┘  │ • LinkedIn API   │
       └────────────┘               │ • Meta Graph API │
                                    │ • Twitter API v2 │
                                    └─────────────────┘
```

### How It Works (Data Flow)

1. **Input**: Files dropped in `Inbox/` or emails arrive via Gmail API polling
2. **Triage**: Watchers create metadata `.md` files in `Needs_Action/` with YAML frontmatter (type, priority, status)
3. **Processing**: Orchestrator reads pending tasks, invokes **Claude Code CLI** as subprocess for reasoning
4. **Planning**: Complex tasks (5+ checklist items, multi-step flag) get a `Plans/PLAN_*.md` generated by Claude
5. **Approval**: Sensitive actions (emails, social posts, payments >$100) → `Pending_Approval/`
6. **Human Review**: User reviews in Obsidian, physically moves file to `Approved/` or `Rejected/`
7. **Execution**: Orchestrator detects approved files, delegates to skill modules + MCP servers
8. **Archival**: Completed tasks → `Done/` with timestamp prefix, all actions → `Logs/YYYY-MM-DD.json`
9. **Reporting**: Scheduler triggers daily briefings, weekly audits, CEO briefings automatically

---

## Tier Breakdown

### Bronze Tier: Foundation

> **Requirement**: Obsidian vault, one watcher, Claude Code reading/writing vault, basic folder structure, agent skills

#### What We Built

**1. Obsidian Vault (`AI_Employee_Vault/`)**

The vault is the AI Employee's "brain" — a file-based state machine where every folder represents a workflow state. Files physically move between folders as they progress through the pipeline.

- `Dashboard.md` — Live status dashboard auto-updated by the orchestrator. Shows counts per folder, system status (watchers, orchestrator, Odoo), approval queue, and quick links. Version-tracked with YAML frontmatter.
- `Company_Handbook.md` — The rules the AI Employee must follow. Priority levels (critical/high/medium/low), financial rules ($100 payment threshold), communication rules, file processing rules. Claude reads this before every task.
- 10 vault folders: `Inbox/`, `Needs_Action/`, `In_Progress/`, `Done/`, `Pending_Approval/`, `Approved/`, `Rejected/`, `Logs/`, `Briefings/`, `Plans/`

**2. Filesystem Watcher (`watchers/filesystem_watcher.py`)**

Built with `watchdog` library. Monitors `Inbox/` using OS-level filesystem events (`on_created`, `on_moved`). When a file appears:
- Classifies priority by file extension (`.pdf`/`.xlsx` = high, `.txt`/`.md` = medium, else low)
- Copies the original file to `Needs_Action/`
- Creates a metadata `.md` file with YAML frontmatter: `type: file_drop`, `original_name`, `file_extension`, `size_bytes`, `created` timestamp, `priority`, `status: pending`
- Includes suggested action checklist in the markdown body
- Skips hidden files, `.tmp` files, and duplicates via processed-set tracking

**3. Claude Code Integration (`orchestrator.py` → `invoke_claude()`)**

The orchestrator invokes Claude Code CLI as a subprocess:
```python
subprocess.run(["claude.cmd", "-p", prompt, "--output-format", "text"],
               capture_output=True, text=True, timeout=120, cwd=str(vault))
```
- Passes the task content + Company Handbook as prompt context
- Claude reads vault files, reasons about the task, and writes results back
- Handles Windows (`claude.cmd`) and Unix (`claude`) automatically
- Timeout: 120 seconds, with retry logic (up to 2 retries on timeout)
- Fallback: if Claude CLI not found, returns clear error message

**4. Agent Skills (defined in `CLAUDE.md`)**

All AI functionality is implemented as agent skills — slash commands that Claude executes:
- `/process-inbox` — Scan `Needs_Action/`, process by priority, log actions, update dashboard
- `/update-dashboard` — Refresh `Dashboard.md` with current folder counts and system status
- `/create-plan` — Generate structured `Plans/PLAN_*.md` for complex tasks (objective, checklist, approvals, dependencies)
- `/triage-file` — Classify a new file by content, assign priority, create action file

---

### Silver Tier: Functional Assistant

> **Requirement**: Two+ watchers, LinkedIn posting, Claude reasoning loop with Plans, MCP server for email, human-in-the-loop approval, scheduling

#### What We Built (on top of Bronze)

**1. Gmail Watcher (`watchers/gmail_watcher.py`)**

Second watcher that polls Gmail API for unread emails:
- **Authentication**: OAuth 2.0 flow with `credentials.json` → `token.json`. Auto-refreshes expired tokens.
- **Polling**: `fetch_unread_emails()` calls Gmail API `users().messages().list(q="is:unread")`, then fetches full message body (plain text, base64-decoded)
- **Priority Classification**: `classify_email_priority()` checks labels (IMPORTANT → high) and subject keywords ("urgent"/"payment" → critical, "meeting"/"deadline" → high, "update"/"fyi" → medium)
- **Deduplication**: Tracks processed message IDs in `.gmail_processed_ids.json` (keeps last 1000 IDs)
- **Action File**: Creates `EMAIL_<message_id>_<time>.md` in `Needs_Action/` with sender, subject, date, body, and suggested actions

So we have 2 watchers: **Filesystem** (real-time via watchdog) + **Gmail** (polling every 2 minutes via scheduler).

**2. LinkedIn Auto-Poster (`skills/linkedin_poster.py`)**

Generates LinkedIn posts to generate sales for the business:
- `create_post_draft(vault)` → Creates `Pending_Approval/LINKEDIN_POST_<date>.md` with frontmatter `action: linkedin_post`
- Reads `Business_Goals.md` for content themes and tone guidelines
- Scheduler fills draft content using Claude: professional, under 1300 chars, max 3 hashtags, ends with CTA
- `execute_approved_post(approved_file)` → Extracts post text from `## Post Content` section, calls LinkedIn REST API (`/rest/posts`) with OAuth Bearer token
- DRY_RUN mode: logs the intended post without hitting LinkedIn API
- One draft per day max (prevents duplicates)

**3. Claude Reasoning Loop with Plans (`orchestrator.py` → `create_plan()`)**

When a task is complex (detected by `needs_planning()` heuristic):
- **Detection**: frontmatter `type: complex/multi_step/project`, or `needs_plan: true`, or 5+ checklist items, or "multi-step" in body text
- **Plan Generation**: Sends task + Company Handbook to Claude with structured prompt. Claude generates a `Plans/PLAN_<task_name>.md` with: Objective, Steps (checklist), Required Approvals, Estimated Actions, Priority, Dependencies
- **Fallback**: If Claude fails, a template plan is auto-generated
- Plans stay as active reference documents the AI Employee follows

**4. Email MCP Server (`mcp_servers/email_server.py`)**

Our first MCP (Model Context Protocol) server — gives Claude tools to interact with Gmail:
- **Protocol**: JSON-RPC 2.0 over stdin/stdout (same protocol Claude Code uses natively)
- **3 Tools**:
  - `send_email` — Send via Gmail API (requires `to`, `subject`, `body`)
  - `draft_email` — Create a Gmail draft
  - `list_drafts` — List recent drafts
- **Registration**: `.claude/mcp.json` registers the server so Claude Code auto-starts it
- **DRY_RUN**: All tools respect the safety flag — logs intended action without sending
- **Authentication**: Same Google OAuth flow as Gmail watcher, with `gmail.send` + `gmail.compose` scopes

**5. Human-in-the-Loop Approval Workflow**

The core safety mechanism. Sensitive actions never auto-execute:
- Orchestrator creates action files in `Pending_Approval/` with `action: <type>` in frontmatter
- **Actions requiring approval**: sending emails (`action: email_send`), LinkedIn posts (`action: linkedin_post`), any payment
- Human reviews the file in Obsidian — it's a readable markdown document with all details
- Move to `Approved/` → orchestrator calls the appropriate skill module to execute
- Move to `Rejected/` → orchestrator archives to `Done/` with `action_rejected` log entry
- `process_approved_actions()` reads frontmatter `action` field to dispatch: `linkedin_post` → `skills.linkedin_poster.execute_approved_post()`, `email_send` → Claude + email MCP

**6. Scheduling (`scheduler.py`)**

Uses the `schedule` library to run all jobs:
- Gmail polling: every 2 minutes
- Task processing (`run_once()`): every 30 seconds
- Daily briefing: 8:00 AM (generates `Briefings/YYYY-MM-DD_Daily.md` with completed/pending/awaiting-approval summaries)
- LinkedIn draft: Monday 10:00 AM
- Filesystem watcher runs in a background thread via `threading.Thread(daemon=True)`
- Initial task processing runs on startup

**7. Additional Silver Skills**:
- `/daily-briefing` — Aggregate today's Done/Pending/Logs data, Claude generates a professional daily report
- `/process-emails` — Triage email action files, classify, draft replies (with approval)
- `/approve-action` — Explains the HITL workflow to the user
- `/weekly-summary` — Aggregate 7 days of daily briefings

---

### Gold Tier: Autonomous Employee

> **Requirement**: Odoo accounting, Facebook + Instagram + Twitter, multiple MCP servers, weekly audit with CEO briefing, error recovery, audit logging, Ralph Wiggum loop, documentation

#### What We Built (on top of Silver)

**1. Odoo Accounting on Azure Cloud (`mcp_servers/odoo_server.py`)**

Full accounting system integrated via Odoo Community Edition:
- **Infrastructure**: Odoo 17 runs as a Docker container on **Azure Container Instances** (ACI). Database is **Neon DB** (serverless PostgreSQL). No local Docker needed.
- **Connection**: `OdooClient` class connects via Python's `xmlrpc.client.ServerProxy` to `ODOO_URL/xmlrpc/2/object`
- **Authentication**: `common.authenticate(db, username, password)` returns user ID for all subsequent calls
- **7 MCP Tools**:
  - `create_invoice` — Creates customer invoice. Finds-or-creates partner, creates `account.move` with line items
  - `list_invoices` — Lists recent customer/vendor invoices with partner, amount, state, date
  - `get_invoice` — Get detailed invoice by ID (including residual amount, due date, line items)
  - `create_payment` — Register outbound payment. **Payments >$100 are blocked** and return `needs_approval: true` per Company Handbook
  - `get_balance` — Full chart of accounts with current balances (47 accounts)
  - `list_journal_entries` — Recent journal entries
  - `get_profit_loss` — Simplified P&L: sums income vs expense account balances
- **DRY_RUN**: Invoice creation and payments are no-ops in dry run mode
- **Health**: Scheduler pings Odoo every 5 minutes, `ServiceHealthChecker` tracks up/down status
- **Live Data**: Currently has 7+ invoices (Azure Interior, Acme Corporation, Ali), Bank balance $12,444.87, Product Sales $2,500

**2. Facebook & Instagram Integration (`skills/meta_poster.py`)**

Posts to Facebook Page and Instagram via Meta Graph API v19.0:
- `post_to_facebook(text, config)` — Posts to `/{page_id}/feed` with page access token
- `post_to_instagram(text, image_url, config)` — Two-step process: (1) create media container at `/{ig_account_id}/media` with `image_url` + `caption`, (2) publish with `/{ig_account_id}/media_publish` and `creation_id`
- `create_post_draft(vault, platform)` — Creates `FB_POST_<date>.md` or `IG_POST_<date>.md` in `Pending_Approval/` with `action: facebook_post` or `action: instagram_post`
- `execute_approved_post(approved_file)` — Reads frontmatter to detect platform, extracts post text from `## Post Content` section
- `generate_meta_summary(vault, days)` — Aggregates posting stats from log files
- Instagram requires `image_url` in frontmatter (validated before publish)
- **Live tested**: Facebook post `1009023102288739_122095456215267502` and Instagram post `17864089473583184` published successfully
- Token management: `scripts/meta_auth.py` exchanges short-lived user tokens for long-lived page tokens via Graph API

**3. Twitter/X Integration (`skills/twitter_poster.py`)**

Posts tweets via Twitter API v2 using `tweepy`:
- `get_twitter_client()` — Returns authenticated `tweepy.Client` with API key, secret, access token
- `post_tweet(text)` — Enforces 280-character limit, calls `client.create_tweet(text=text)`
- Same draft/approve/execute pattern as other platforms
- Drafts saved as `TWEET_<date>.md` with `action: twitter_post`

**4. Social Media MCP Server (`mcp_servers/social_server.py`)**

Third MCP server — gives Claude tools for all social platforms:
- **6 Tools**: `post_facebook`, `post_instagram`, `post_tweet`, `draft_social_post`, `get_social_summary`, `list_pending_posts`
- Delegates to `skills/meta_poster.py` and `skills/twitter_poster.py`
- All tools respect DRY_RUN mode

**5. Weekly Audit & CEO Briefing (`skills/weekly_audit.py`)**

Automated weekly reporting system:
- `aggregate_weekly_data(vault, days=7)` — Reads `Done/` files (by date prefix), `Logs/*.json` entries, `Pending_Approval/` and `Rejected/` folders. Counts by action type, social media platform, emails processed.
- `generate_weekly_briefing()` → `Briefings/YYYY-WXX_Weekly.md` — Detailed: overview stats, completed tasks list, action breakdown table, pending approvals, rejected items, recommendations
- `generate_ceo_briefing()` → `Briefings/YYYY-WXX_CEO_Briefing.md` — Executive-level: KPI dashboard table (tasks, emails, social posts, pending, rejected, total actions), social media breakdown table, key achievements, action items, strategic recommendations
- Scheduled: Sunday 8:00 PM automatically

**6. Error Recovery & Graceful Degradation (`utils/retry.py`)**

- `@retry_with_backoff(max_retries, base_delay, max_delay)` — Decorator with exponential backoff. Used on Odoo authentication, API calls. Delays: 1s → 2s → 4s → ... up to max_delay cap.
- `@graceful_degrade(fallback_value)` — Catches exceptions, logs error, returns fallback instead of crashing
- `ServiceHealthChecker` — Singleton (`health`) tracks per-service status: `record_success(service)`, `record_failure(service, error)`, `is_healthy(service)`, `summary()`. Used by Odoo health check, social media posting.
- `invoke_claude()` retries up to 2 times on timeout
- Orchestrator catches import errors for missing skill modules (graceful skip)
- Scheduler wraps every job in try/except (one job failure doesn't crash others)

**7. Comprehensive Audit Logging (`utils/audit.py` + `orchestrator.log_action()`)**

- Every action appends to `Logs/YYYY-MM-DD.json` — JSON array of timestamped entries
- Fields: `timestamp` (UTC ISO), `action_type`, `actor`, `result`, `task_file`, `summary`, plus custom fields
- `utils/audit.py` — Thin wrapper enforcing consistent field naming across all modules
- Action types logged: `task_processed`, `plan_created`, `approved_action_executed`, `action_rejected`, `daily_briefing_generated`, `linkedin_draft_generated`, `facebook_draft_generated`, `twitter_draft_generated`, `instagram_draft_generated`, `weekly_audit_completed`

**8. Ralph Wiggum Loop (`skills/task_state.py` + `.claude/hooks/stop.py`)**

Named after the Simpsons meme "I'm in danger" — keeps Claude working until multi-step tasks finish:
- `start_multi_step_task(vault, name, steps)` — Creates `.task_state.json` with step list, iteration counter
- `complete_step(vault, step_id)` — Marks individual step as done
- `.claude/hooks/stop.py` — Claude Code stop hook. When Claude tries to exit:
  - Reads `.task_state.json`
  - If incomplete steps exist → outputs `{"decision": "block", "reason": "..."}` → Claude continues working
  - If all steps done → outputs `{"decision": "allow"}` → Claude exits normally
- **Safety**: Hard limit of `MAX_ITERATIONS = 10` prevents infinite loops
- Orchestrator auto-initializes Ralph Wiggum state from plan checklist items when complex tasks are detected
- Registered in `.claude/settings.local.json` as a stop hook

**9. Documentation**

- `docs/ARCHITECTURE.md` — System diagram, component descriptions, data flow, cloud vs local table
- `docs/LESSONS_LEARNED.md` — Architecture decisions, trade-offs, challenges
- `docs/ODOO_SETUP.md` — Neon DB + Azure ACI deployment guide (step-by-step)
- `docs/META_SETUP.md` — Meta Developer App + Graph API setup
- `docs/TWITTER_SETUP.md` — Twitter Developer Portal + API v2 keys
- `docs/GMAIL_SETUP.md` — Google Cloud Console + OAuth credentials
- `docs/LINKEDIN_SETUP.md` — LinkedIn Developer App setup
- `CLAUDE.md` — All 15 agent skill definitions

**10. Extended Orchestrator & Scheduler**

Orchestrator additions:
- `get_pending_tasks()` now handles prefixes: `FILE_`, `EMAIL_`, `TASK_`, `LINKEDIN_`, `FB_`, `IG_`, `TWEET_`, `ODOO_`
- `process_approved_actions()` dispatches: `facebook_post` → meta_poster, `instagram_post` → meta_poster, `twitter_post` → twitter_poster, `odoo_invoice` → Claude + Odoo MCP, `odoo_payment` → Claude + Odoo MCP
- Dashboard shows social media pending count, Odoo connection status

Scheduler additions:
- Tuesday 10:30 AM: Facebook draft
- Wednesday 10:30 AM: Twitter/X draft
- Thursday 10:30 AM: Instagram draft
- Sunday 8:00 PM: Weekly audit + CEO briefing
- Every 5 minutes: Odoo health check (pings Azure URL)
- `_fill_social_draft()` helper: reads `Business_Goals.md`, asks Claude to generate platform-specific content

---

### Platinum Tier: (Planned)

> Cloud 24/7 deployment, work-zone specialization (Cloud vs Local), vault sync via Git, delegation protocol

**Not yet implemented.** Planned additions:
1. Deploy AI Employee to a cloud VM (always-on watchers + orchestrator + health monitoring)
2. Cloud owns: email triage, draft replies, social post scheduling
3. Local owns: approvals, payments, final send/post actions
4. Vault sync via Git (Cloud ↔ Local)
5. Claim-by-move rule: `In_Progress/<agent>/` prevents double-work
6. Single-writer rule for `Dashboard.md` (Local only)

---

## Quick Start

### Prerequisites

- **Python 3.11+**
- **[uv](https://docs.astral.sh/uv/)** — Python package manager
- **[Claude Code CLI](https://docs.anthropic.com/en/docs/claude-code)** — Must be installed and authenticated
- **Azure account** — For Odoo hosting (free tier works)
- **API credentials** — See [Setup Guides](#setup-guides)

### Installation

```bash
# 1. Clone the repository
git clone https://github.com/YOUR_USERNAME/ai_employee.git
cd ai_employee

# 2. Install dependencies
uv sync

# 3. Copy and configure environment variables
cp .env.example .env
# Edit .env with your actual credentials (see Setup Guides)

# 4. Test with DRY_RUN mode first (DRY_RUN=true in .env)
uv run python main.py --once

# 5. Run full scheduler (production)
uv run python main.py --scheduler
```

### Run Modes

```bash
uv run python main.py                  # File watcher only
uv run python main.py --orchestrator   # Orchestrator only (processes tasks)
uv run python main.py --scheduler      # Full scheduler (all watchers + orchestrator + jobs)
uv run python main.py --once           # Process pending tasks once and exit
```

---

## Project Structure

```
ai_employee/
├── main.py                    # Entry point (argparse: --once, --scheduler, --orchestrator)
├── orchestrator.py            # Core coordinator: tasks → Claude CLI → skills → vault
├── scheduler.py               # Job scheduler (gmail poll, social drafts, audit, health check)
├── pyproject.toml             # Dependencies (httpx, watchdog, tweepy, schedule, google-api)
│
├── watchers/
│   ├── filesystem_watcher.py  # Watchdog-based Inbox/ monitor (Bronze)
│   └── gmail_watcher.py       # Gmail API poller with deduplication (Silver)
│
├── skills/
│   ├── linkedin_poster.py     # LinkedIn REST API posting (Silver)
│   ├── meta_poster.py         # Facebook + Instagram via Meta Graph API (Gold)
│   ├── twitter_poster.py      # Twitter/X via tweepy API v2 (Gold)
│   ├── weekly_audit.py        # Weekly audit + CEO briefing generation (Gold)
│   └── task_state.py          # Ralph Wiggum multi-step task tracking (Gold)
│
├── mcp_servers/
│   ├── email_server.py        # Gmail send/draft/list MCP tools (Silver)
│   ├── odoo_server.py         # Odoo accounting 7-tool MCP server (Gold)
│   └── social_server.py       # Social media 6-tool MCP server (Gold)
│
├── utils/
│   ├── __init__.py
│   ├── retry.py               # Exponential backoff + health checker (Gold)
│   ├── frontmatter.py         # YAML frontmatter parser/creator (Gold)
│   └── audit.py               # Audit logging wrapper (Gold)
│
├── scripts/
│   └── meta_auth.py           # Meta token exchange helper (Gold)
│
├── .claude/
│   ├── mcp.json               # MCP server registrations (3 servers)
│   ├── hooks/stop.py          # Ralph Wiggum stop hook (Gold)
│   └── settings.local.json    # Claude Code permissions + hooks config
│
├── AI_Employee_Vault/         # Obsidian vault (file-based state machine)
│   ├── Inbox/                 # Drop files here → auto-triaged
│   ├── Needs_Action/          # Pending tasks with YAML frontmatter
│   ├── In_Progress/           # Currently claimed by orchestrator
│   ├── Pending_Approval/      # Awaiting human review
│   ├── Approved/              # Human-approved → auto-executed
│   ├── Rejected/              # Denied → archived
│   ├── Done/                  # Completed (timestamped)
│   ├── Logs/                  # JSON audit logs (per-day)
│   ├── Briefings/             # Daily/weekly reports + CEO briefings
│   ├── Plans/                 # Claude-generated task plans
│   ├── Dashboard.md           # Live status (auto-updated)
│   ├── Company_Handbook.md    # Business rules AI must follow
│   └── Business_Goals.md      # Content themes per platform
│
├── docs/                      # Setup guides (Gmail, LinkedIn, Meta, Twitter, Odoo, Architecture)
├── CLAUDE.md                  # 15 agent skill definitions
├── .env.example               # Environment variable template (no real credentials)
└── .gitignore                 # Protects .env, credentials, tokens
```

---

## Setup Guides

| Service | Guide | What You Need |
|---------|-------|---------------|
| Gmail | [`docs/GMAIL_SETUP.md`](docs/GMAIL_SETUP.md) | Google Cloud Console project, OAuth client ID |
| LinkedIn | [`docs/LINKEDIN_SETUP.md`](docs/LINKEDIN_SETUP.md) | LinkedIn Developer App, OAuth 2.0 token |
| Facebook/Instagram | [`docs/META_SETUP.md`](docs/META_SETUP.md) | Meta Developer App, Page Access Token |
| Twitter/X | [`docs/TWITTER_SETUP.md`](docs/TWITTER_SETUP.md) | Twitter Developer Portal, API v2 keys |
| Odoo + Azure | [`docs/ODOO_SETUP.md`](docs/ODOO_SETUP.md) | Azure account + Neon DB (both have free tiers) |

---

## Security Disclosure

### Credential Handling

| Credential | Storage | Protection |
|------------|---------|------------|
| Gmail OAuth (`credentials.json`, `token.json`) | Local filesystem only | `.gitignore` — never committed |
| LinkedIn/Meta/Twitter API tokens | `.env` file only | `.gitignore` — never committed |
| Odoo admin password | `.env` file only | `.gitignore` — never committed |
| Neon DB connection string | `.env` file only | `.gitignore` — never committed |
| Azure credentials | Azure CLI session | Managed by `az login`, not stored in project |
| `client_secret.json` | Local filesystem only | `.gitignore` — never committed |

**`.env.example`** contains only placeholder values (`your_api_key`, `your_access_token`, etc.) — zero real credentials.

### Safety Controls

1. **DRY_RUN Mode** (`DRY_RUN=true` in `.env`) — Default in `.env.example`. All external actions (email send, social media post, Odoo payment) are logged but NOT executed. Must explicitly set `DRY_RUN=false` for production.

2. **Human-in-the-Loop (HITL) Approval** — Sensitive actions NEVER auto-execute:
   - Sending emails → `Pending_Approval/` → human moves to `Approved/`
   - Publishing social media posts (all 4 platforms) → same workflow
   - Payments exceeding $100 → Odoo MCP returns `needs_approval: true`, orchestrator creates approval file
   - Payments to new payees → always flagged

3. **Audit Logging** — Every action logged to `Logs/YYYY-MM-DD.json` with UTC timestamp, actor, action type, result, and context. Nothing happens silently.

4. **Company Handbook** — Configurable business rules in `Company_Handbook.md`. The AI reads this before every task. Rules include payment thresholds, communication standards, social media limits (280 chars for Twitter, max 3 hashtags), posting schedule.

5. **Ralph Wiggum Safety** — Hard limit of 10 iterations on the stop hook prevents infinite Claude loops.

6. **No Secrets in Git** — `.gitignore` covers: `.env`, `credentials.json`, `client_secret.json`, `token.json`, `.task_state.json`

### What the AI Employee CAN vs CANNOT Do

| CAN (with human approval) | CANNOT (by design) |
|---------------------------|-------------------|
| Send emails (after file moved to Approved/) | Send emails autonomously |
| Post to LinkedIn/FB/IG/Twitter (after approval) | Post without human review |
| Create invoices in Odoo | Auto-approve payments >$100 |
| Generate reports and briefings | Delete original files (always moves to Done/) |
| Triage and categorize incoming items | Share confidential data externally |
| Create task plans for complex work | Bypass the approval workflow |

---

## Scheduled Jobs

| Time | Day | Job | Tier |
|------|-----|-----|------|
| Every 30s | Always | Process pending tasks | Silver |
| Every 2 min | Always | Poll Gmail for new emails | Silver |
| Every 5 min | Always | Odoo health check | Gold |
| 08:00 | Daily | Generate daily briefing | Silver |
| 10:00 | Monday | LinkedIn post draft | Silver |
| 10:30 | Tuesday | Facebook post draft | Gold |
| 10:30 | Wednesday | Twitter/X post draft | Gold |
| 10:30 | Thursday | Instagram post draft | Gold |
| 20:00 | Sunday | Weekly audit + CEO briefing | Gold |

---

## Cloud Infrastructure

| Component | Service | Cost |
|-----------|---------|------|
| Odoo 17 ERP | Azure Container Instances | ~$1.50/day (stoppable) |
| PostgreSQL | Neon DB (serverless) | Free tier (0.5 GB) |
| Gmail, LinkedIn, Meta, Twitter APIs | Cloud APIs | Free tier |

```bash
# Stop Odoo (pause billing):
az container stop --resource-group ai-employee-rg --name odoo-server

# Start again:
az container start --resource-group ai-employee-rg --name odoo-server
```

---

## Demo Highlights

1. **File Drop Triage**: Drop any file in `Inbox/` → watchdog detects it → action file created in `Needs_Action/` with auto-classified priority
2. **Email Processing**: Gmail watcher polls every 2 min → `EMAIL_*.md` in `Needs_Action/` → Claude triages and drafts replies → approval workflow
3. **Social Media Workflow**: Scheduled drafts (Mon-Thu) → Claude generates content from `Business_Goals.md` → human approves in Obsidian → auto-publishes to FB/IG/LinkedIn/Twitter
4. **Live Facebook Post**: Published post ID `1009023102288739_122095456215267502` via Meta Graph API
5. **Live Instagram Post**: Published post ID `17864089473583184` via 2-step media container flow
6. **Invoice Creation**: "Create invoice for Ali - 5x Widget at $50" → Odoo creates invoice ID 25 on Azure ACI → stored in Neon DB
7. **Accounting Dashboard**: Real-time: Bank $12,444.87, Product Sales $2,500, 47 accounts, 7 invoices
8. **CEO Briefing**: Weekly auto-generated `Briefings/YYYY-WXX_CEO_Briefing.md` with KPI tables
9. **Ralph Wiggum Loop**: Complex task → `.task_state.json` → stop hook blocks Claude exit → continues until all steps done (max 10 iterations)
10. **DRY_RUN Safety**: Set `DRY_RUN=true` → all actions logged but nothing executes externally

---

## Tech Stack

| Component | Technology |
|-----------|-----------|
| Reasoning Engine | Claude Code CLI (Claude Opus) |
| Language | Python 3.11+ |
| Package Manager | uv |
| MCP Protocol | JSON-RPC 2.0 over stdin/stdout |
| Vault | Obsidian (file-based state machine) |
| Email | Gmail API + Google OAuth 2.0 |
| LinkedIn | LinkedIn REST API v2 |
| Facebook/Instagram | Meta Graph API v19.0 |
| Twitter/X | Twitter API v2 via tweepy |
| Accounting | Odoo 17 Community via XML-RPC |
| Cloud Hosting | Azure Container Instances |
| Database | Neon DB (serverless PostgreSQL) |
| Scheduling | schedule library |
| File Watching | watchdog library |
| HTTP Client | httpx |

---

## License

MIT
